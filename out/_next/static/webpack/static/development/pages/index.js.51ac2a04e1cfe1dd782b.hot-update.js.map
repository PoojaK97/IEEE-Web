{"version":3,"file":"static/webpack/static/development/pages/index.js.51ac2a04e1cfe1dd782b.hot-update.js","sources":["webpack:///./components/webPush.js"],"sourcesContent":["import 'firebase/messaging'\nimport firebase from 'firebase/app'\nimport 'firebase/database'\nconst firebaseCloudMessaging = {\n  tokenInlocalforage: async () => {\n    return localStorage.getItem('fcm_token')\n  },\n\n  init: async function (type,uid) {\n    try{firebase.initializeApp({\n      apiKey: \"AIzaSyDEIW5sy8lwg8ialwvTmEqgfevaiy6ELKk\",\n            authDomain: \"ritb-ieee.firebaseapp.com\",\n            databaseURL: \"https://ritb-ieee.firebaseio.com\",\n            projectId: \"ritb-ieee\",\n            storageBucket: \"ritb-ieee.appspot.com\",\n            messagingSenderId: \"776351305681\"\n    })}\n    catch(err){}\n    // try {\n    //   if ((await this.tokenInlocalforage()) !== null) {\n    //     return false\n    //   }\n    try{\n      if(type){\n        const messaging = firebase.messaging()\n        await messaging.requestPermission()\n        const token = await messaging.getToken()\n\n        localStorage.setItem('fcm_token', token)\n          firebase.database().ref('users/'+uid).set({\n              token:token\n\n        });\n        messaging.onTokenRefresh(function() {\n        messaging.getToken().then(function(refreshedToken) {\n          firebase.database().ref('users/' + uid).remove()\n          firebase.database().ref('users/'+uid).set({\n            token:token\n                    });\n        }).catch(function(err) {\n          showToken('Unable to retrieve refreshed token ', err);\n        });\n      });\n            }\n      else{\n        console.log('removing subs')\n        localStorage.removeItem('fcm_token')\n        firebase.database().ref('users/' + uid).remove()\n      }\n\n    } catch (error) {\n        console.error(error)\n      }\n  }\n}\n\nexport { firebaseCloudMessaging }\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAOA;AAGA;AACA;AACA;AACA;AACA;AAfA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAeA;AAhBA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAkBA;AAEA;AACA;AACA;AADA;AAIA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AAlCA;AAAA;AACA;AADA;AAqCA;AACA;AACA;AACA;AAxCA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AA2CA;AACA;AA5CA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AALA;;;;;A","sourceRoot":""}